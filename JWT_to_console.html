<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Webview JWT Test</title>
</head>
<body>
  <h2>Webview SDK JWT Test</h2>
  <p>Check the console for the fetched JWT.</p>

  <!-- Zendesk Webview SDK loader -->
  <script>
    ;(function(d,s,id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "https://static.zdassets.com/conversation-extensions/latest/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    })(document, 'script', 'WebviewSdkScript');

    // Callback called once the SDK has initialized
    window.webviewSdkInit = function(WebviewSdk) {
      // store for later use
      window.webviewSdk = WebviewSdk;
      console.log('[WebviewSDK] initialized');
      // fetch JWT immediately
      WebviewSdk.getJwt()
        .then(token => {
          console.log('[WebviewSDK] JWT:', token);
        })
        .catch(err => {
          console.error('[WebviewSDK] getJwt error:', err);
        });
    };
  </script>

</body>
</html>
